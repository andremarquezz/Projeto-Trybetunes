(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{17:function(e,t,n){e.exports={navBar:"Header_navBar__2gQSn",links:"Header_links__1W9_K",containerName:"Header_containerName__LKngj"}},19:function(e,t,n){e.exports={container:"CardAlbum_container__Rg2MA",link:"CardAlbum_link__p2awR",card:"CardAlbum_card__3NaLc",img:"CardAlbum_img__3F-08"}},23:function(e,t,n){e.exports={container:"MusicCard_container__1DC7B",containerCard:"MusicCard_containerCard__iYZlI",audio:"MusicCard_audio__1v_D-"}},27:function(e,t,n){e.exports={container:"Search_container__3HSZB",form:"Search_form__1eTpR"}},28:function(e,t,n){e.exports={infoAlbum:"Album_infoAlbum__3-MAI"}},32:function(e,t,n){e.exports={container:"Login_container__2B2pj"}},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(29),s=n.n(c),i=n(13),o=n(14),u=n(3),l=n(4),j=n(5),b=n(6),f=n(7),d=n(2),O=n(8),m="user",h=function(e){return localStorage.setItem(m,JSON.stringify(e))},p=function(e){return function(t){setTimeout((function(){t(e)}),100)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(m));null===t&&(t={}),p(t)(e)}))},x=function(e){return new Promise((function(t){h(Object(o.a)(Object(o.a)({},{name:"",email:"",image:"",description:""}),e)),p("OK")(t)}))},g=n(17),k=n.n(g),N=n(0),_=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).user=Object(O.a)(Object(d.a)().mark((function t(){var n,a;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:n=t.sent,a=n.name,e.setState({name:a,loading:!0});case 5:case"end":return t.stop()}}),t)}))),e.state={name:"",loading:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.user()}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.loading;return Object(N.jsx)("header",{children:n&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:k.a.containerName,children:Object(N.jsx)("h2",{children:t})}),Object(N.jsxs)("nav",{className:k.a.navBar,children:[Object(N.jsx)(i.b,{to:"/search",className:k.a.links,children:"Search"}),Object(N.jsx)(i.b,{to:"/favorites",className:k.a.links,children:"Favorites"}),Object(N.jsx)(i.b,{to:"/profile",className:k.a.links,children:"Profile"})]})]})})}}]),n}(a.Component),y=n(22),S="favorite_songs";JSON.parse(localStorage.getItem(S))||localStorage.setItem(S,JSON.stringify([]));var w=function(){return JSON.parse(localStorage.getItem(S))},C=function(e){return localStorage.setItem(S,JSON.stringify(e))},F=function(e){return function(t){setTimeout((function(){t(e)}),100)}},A=function(){return new Promise((function(e){var t=w();F(t)(e)}))},I=function(e){return new Promise((function(t){if(e){var n=w();C([].concat(Object(y.a)(n),[e]))}F("OK")(t)}))},M=function(e){return new Promise((function(t){var n=w();C(n.filter((function(t){return t.trackId!==e.trackId}))),F("OK")(t)}))},D=(n(46),function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{className:"loading"}),Object(N.jsx)("h1",{children:"Carregando..."})]})}}]),n}(a.Component)),P=D,T=n(23),B=n.n(T),J=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).getFavorites=Object(O.a)(Object(d.a)().mark((function t(){var n;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:n=t.sent,e.setState({songsFavorite:n},(function(){e.setState({loading:!1})}));case 4:case"end":return t.stop()}}),t)}))),e.isFavorite=function(t){return e.state.songsFavorite.some((function(e){return e.trackName===t}))},e.saveFavorite=function(){var t=Object(O.a)(Object(d.a)().mark((function t(n){var a,r,c;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state.songsFavorite,r=e.props.songs,c=r.find((function(e){return e.trackName===n})),a.some((function(e){return e.trackName===n}))?e.setState((function(){return{loading:!0}}),(function(){e.removeFavorite(n)})):e.setState((function(e){return{loading:!0,songsFavorite:[].concat(Object(y.a)(e.songsFavorite),[c])}}),Object(O.a)(Object(d.a)().mark((function t(){var a;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.find((function(e){return e.trackName===n})),t.next=3,I(a);case 3:e.setState({loading:!1});case 4:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFavorite=function(){var t=Object(O.a)(Object(d.a)().mark((function t(n){var a,r,c;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.songsFavorite,r=a.filter((function(e){return e.trackName!==n})),c=a.find((function(e){return e.trackName===n})),t.next=5,M(c);case 5:e.setState({songsFavorite:[r],loading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={loading:!0,songsFavorite:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getFavorites()}},{key:"render",value:function(){var e=this,t=this.state.loading,n=this.props.songs;return Object(N.jsx)("div",{className:B.a.container,children:n.map((function(n){var a=n.trackName,r=n.previewUrl,c=n.trackId;return Object(N.jsxs)("div",{className:B.a.containerCard,children:[Object(N.jsx)("p",{children:a}),t?Object(N.jsx)(P,{}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("audio",{src:r,className:B.a.audio,controls:!0,children:Object(N.jsx)("track",{kind:"captions"})}),Object(N.jsxs)("label",{htmlFor:"checkbox",children:[Object(N.jsx)("input",{type:"checkbox",checked:e.isFavorite(a),name:"checkbox",onChange:function(){return e.saveFavorite(a)}}),"Favorita"]})]})]},c)}))})}}]),n}(a.Component),U=J,K=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).getFavorites=Object(O.a)(Object(d.a)().mark((function t(){var n;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:n=t.sent,e.setState({songsFavorite:n},(function(){e.setState({loading:!1})}));case 4:case"end":return t.stop()}}),t)}))),e.state={loading:!0,songsFavorite:[{}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getFavorites()}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.songsFavorite;return Object(N.jsxs)("div",{children:[Object(N.jsx)(_,{}),t?Object(N.jsx)(P,{}):Object(N.jsx)(U,{songs:n})]})}}]),n}(a.Component),L=n(16),R=n.p+"static/media/logo.99baff09.svg",H=n(32),q=n.n(H),E=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(){return Object(L.a)({},a,r)}))},e.userLogin=Object(O.a)(Object(d.a)().mark((function t(){var n,a;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.history,a=e.state.loginName,e.setState({loading:!0}),t.next=5,x({name:"".concat(a)});case 5:e.setState({loading:!1}),n.push("/search");case 7:case"end":return t.stop()}}),t)}))),e.state={loginName:"",loading:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loginName,n=e.loading;return Object(N.jsx)("div",{className:q.a.container,children:n?Object(N.jsx)(P,{}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("img",{src:R,alt:"logo TrybeTunes"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("label",{htmlFor:"loginName",children:Object(N.jsx)("input",{autoComplete:"off",placeholder:"Digite seu nome aqui",name:"loginName",type:"text",onChange:this.onInputChange,value:t})}),Object(N.jsx)("button",{type:"submit",disabled:t.length<3,onClick:this.userLogin,children:"Entrar"})]})]})})}}]),n}(a.Component),Z=n(19),Q=n.n(Z),W=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.nameSearch;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h2",{children:"Resultado de \xe1lbuns de: ".concat(n)}),Object(N.jsx)("div",{className:Q.a.container,children:t.map((function(e){var t=e.artistName,n=e.collectionName,a=e.artworkUrl100,r=e.collectionId;return Object(N.jsxs)("div",{className:Q.a.card,children:[Object(N.jsx)("img",{className:Q.a.img,src:a,alt:"imageAlbum"}),Object(N.jsx)("h3",{children:n}),Object(N.jsx)("span",{children:t}),Object(N.jsx)(i.b,{to:"/album/".concat(r),className:Q.a.link,children:"Mais informa\xe7\xf5es"})]},r)}))})]})}}]),n}(a.Component),Y=W,z=function(){var e=Object(O.a)(Object(d.a)().mark((function e(t){var n,a,r,c,s,i;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=z,V=n(27),X=n.n(V),$=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(){return Object(L.a)({},a,r)}))},e.searchAlbums=function(){var t=Object(O.a)(Object(d.a)().mark((function t(n){return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({loading:!0,valueSearch:n},Object(O.a)(Object(d.a)().mark((function t(){var a;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(n);case 2:a=t.sent,e.setState({nameSearch:"",loading:!1,data:a,foundAlbum:0!==a.length});case 4:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={nameSearch:"",valueSearch:"",loading:!1,foundAlbum:!1,data:[]},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.nameSearch,a=t.loading,r=t.foundAlbum,c=t.data,s=t.valueSearch;return Object(N.jsxs)("div",{children:[Object(N.jsx)(_,{}),a?Object(N.jsx)(P,{}):Object(N.jsxs)("div",{className:X.a.form,children:[Object(N.jsxs)("form",{className:X.a.container,children:[Object(N.jsx)("input",{name:"nameSearch",type:"text",placeholder:"Nome do Artista ou Banda",value:n,onChange:this.onInputChange}),Object(N.jsx)("button",{type:"button",disabled:n.length<2,onClick:function(){return e.searchAlbums(n)},children:"Pesquisar"}),r?null:Object(N.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})]}),r&&Object(N.jsx)(Y,{data:c,nameSearch:s})]})]})}}]),n}(a.Component),ee=$,te=function(){var e=Object(O.a)(Object(d.a)().mark((function e(t){var n,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=te,ae=n(28),re=n.n(ae),ce=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).getApiMusics=Object(O.a)(Object(d.a)().mark((function t(){var n,a,r;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.next=3,ne(n);case 3:a=t.sent,r=a.filter((function(e){return"song"===e.kind})),e.setState({infoTracks:a[0],tracks:r});case 6:case"end":return t.stop()}}),t)}))),e.state={tracks:[],infoTracks:[]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getApiMusics()}},{key:"render",value:function(){var e=this.state,t=e.infoTracks,n=e.tracks,a=t.artistName,r=t.collectionName,c=t.artworkUrl100;return Object(N.jsxs)("div",{lassName:re.a.pageAlbum,children:[Object(N.jsx)(_,{}),Object(N.jsxs)("section",{className:re.a.infoAlbum,children:[" ",Object(N.jsx)("h2",{children:a}),Object(N.jsx)("h2",{children:r}),Object(N.jsx)("img",{src:c,alt:"Capa do Album"})]}),Object(N.jsx)(U,{songs:n})]})}}]),n}(a.Component),se=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)(_,{})})}}]),n}(a.Component),ie=se,oe=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)(_,{})})}}]),n}(a.Component),ue=oe,le=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsx)("div",{children:Object(N.jsx)("p",{children:"NotFound"})})}}]),n}(a.Component),je=le,be=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(N.jsxs)(f.c,{children:[Object(N.jsx)(f.a,{path:"/search",component:ee}),Object(N.jsx)(f.a,{path:"/album/:id",render:function(e){return Object(N.jsx)(ce,Object(o.a)({},e))}}),Object(N.jsx)(f.a,{path:"/favorites",component:K}),Object(N.jsx)(f.a,{path:"/profile/edit",component:ue}),Object(N.jsx)(f.a,{path:"/profile",component:ie}),Object(N.jsx)(f.a,{exact:!0,path:"/",render:function(e){return Object(N.jsx)(E,Object(o.a)({},e))}}),Object(N.jsx)(f.a,{component:je})]})}}]),n}(r.a.Component),fe=be;n(47);s.a.render(Object(N.jsx)(i.a,{children:Object(N.jsx)(fe,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.775af786.chunk.js.map